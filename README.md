# Arithmetic Operations Equations Detection and Recognition

## Abstract

I have presented two techniques that will detect handwritten arithmetic equations. The different symbols and numbers in the hand written equation are first recognized and then Neural Networks are used for recognition of elements. I’ve compared two neural networks for this job. First, a fully connected neural network with 2 hidden layers. Second, using 2 Convolutional layers followed by 2 fully connected layers. I have compared the two networks against my own handwritten math equations.

## Introduction

When you start learning neural networks in machine learning, you realize that one of the most powerful supervised deep learning techniques is the Convolutional Neural Networks (abbreviated as “CNN”). Object classification and detection capabilities have dramatically improved due to advances in deep learning and convolutional networks. The most basic form of a neural network is a fully connected neural network. Taking these two neural networks into consideration, I started this project. 

I wanted to start with something classical and build up on that idea. This is the reason I started this project with the MNIST database. This database is widely used for training and testing in the field of machine learning. It is a collection of 70000 handwritten digits split into training and test set of 60000 and 10000 images respectively. So, starting with the basic neural network idea, I built a network which contained an input layer, an output layer of 25 neurons and two hidden layers in between with Relu activation. The output layer is followed by Logsoftmax activation because this is a classification problem. After success in building this network, I decided to make it more complex by trying to detect multiple digits. I did this by first detecting how many digits there are in the image. Using OpenCV, I made rectangles around the digits the program found. Extracting all of the rectangles gave me the number of digits in the image. I then used my neural network to recognize which digit it is based on the highest prediction value. 

The MNIST database worked very well on its own images and gave me a 97% accuracy but for the images that I fed into the network, it couldn’t recognize the image. This is why I decided to change the database that I was using to a database which not only recognized my handwritten digits better but also got trained on the arithmetic operations as well. The database that I used is the handwrittenmathsymbols database available on Kaggle. This database includes basic Greek alphabet symbols like: alpha, beta, gamma, mu, sigma, phi and theta. English alphanumeric symbols are also included. All math operators, set operators. Basic pre-defined math functions like: log, lim, cos, sin, tan. Math symbols like: \int, \sum, \sqrt, \delta and more.

There are four layers in the network called input layer, 2 hidden layers, and an output layer respectively. Layers are fully interconnected with each other but there are no interconnections in the units of the same layer. The nodes represent computational units and need to obtain inputs which should be processed in neurons to produce the outputs. After training my network with this database, I got much better results on images that I made by hand for both digits and arithmetic operations. The original handwrittenmathsymbols database contains many extra symbols which weren’t needed in the scope of what I was developing so I deleted those extra files. If needed, I could even use those extra symbols and make my model more complex. 

After completing this task with the fully connected neural network, I decided to build a network using convolutional neural network. I used the same handwrittenmathsymbols dataset for this task. I built a network with 2 convolutional layers, followed by 2 fully connected layers. I used relu activation in this and for regularization, I used 2 dropout layers. The overall accuracy this network gave me on my test set was 97%. For my own handwritten images, this network gave me a better and more accurate result.
